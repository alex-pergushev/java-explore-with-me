{
  "info": {
    "_postman_id": "f66d0dfa-1def-44cb-abee-dabff5c6b5f1",
    "name": "Test Explore With Me - Add comment",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "name": "create User#1",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "c8cbf829-2f6d-4eea-8337-182e59e310ae",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"name\":\"Alex\",\n    \"email\":\"alex@pergushev.ru\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/admin/users"
      },
      "response": []
    },
    {
      "name": "create User#2",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "bbf3d550-35d4-48f3-b73d-39e7a8383e04",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"name\":\"Kirill\",\n    \"email\":\"kirill@pergushev.ru\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/admin/users"
      },
      "response": []
    },
    {
      "name": "create Admin",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "b8f217d6-8777-49eb-b6ff-d6704ffd87d9",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"name\":\"admin\",\n    \"email\":\"admin@gmail.com\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/admin/users"
      },
      "response": []
    },
    {
      "name": "create Category#1",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "e0a6bbf2-b439-4395-a66a-6b20f9268f0d",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"name\":\"category1\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/admin/categories"
      },
      "response": []
    },
    {
      "name": "create Category#2",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "235a76c0-1c37-4b82-9dc5-55b7bae18707",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"name\":\"category2\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/admin/categories"
      },
      "response": []
    },
    {
      "name": "create Event#1",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "39b7d739-f850-46e7-a483-2140b665cec5",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"annotation\":\"annotation1 + annotation1\",\n    \"category\":1,\n    \"description\":\"description1 + description1\",\n    \"eventDate\":\"2022-11-22 12:00:00\",\n    \"location\":{\n        \"lat\":1.1,\n        \"lon\":2.1\n    },\n    \"title\":\"event1\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/users/1/events"
      },
      "response": []
    },
    {
      "name": "publish Event#1",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "});"
            ]
          }
        }
      ],
      "id": "afe49491-5c64-4d8f-b632-d5e63ac3b96c",
      "request": {
        "method": "PATCH",
        "header": [],
        "url": "localhost:8080/admin/events/1/publish"
      },
      "response": []
    },
    {
      "name": "create Event#2",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "6cc21f58-448c-4184-91b2-0f24a00fffda",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"annotation\":\"annotation2 + annotation2\",\n    \"category\":1,\n    \"description\":\"description2 + description2\",\n    \"eventDate\":\"2022-11-25 12:00:00\",\n    \"location\":{\n        \"lat\":1.1,\n        \"lon\":2.1\n    },\n    \"title\":\"event2\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/users/2/events"
      },
      "response": []
    },
    {
      "name": "publish Event#2",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "});"
            ]
          }
        }
      ],
      "id": "692ee3fa-c267-4b8e-947d-93bdad31d9b2",
      "request": {
        "method": "PATCH",
        "header": [],
        "url": "localhost:8080/admin/events/2/publish"
      },
      "response": []
    },
    {
      "name": "create Event#3",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "0fa9a685-ee6a-431c-946c-008ade4d8cf8",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"annotation\":\"annotation3 + annotation3\",\n    \"category\":2,\n    \"description\":\"description3 + description3\",\n    \"eventDate\":\"2022-11-30 12:00:00\",\n    \"location\":{\n        \"lat\":1.1,\n        \"lon\":2.1\n    },\n    \"title\":\"event3\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/users/2/events"
      },
      "response": []
    },
    {
      "name": "create Comment#1 User#1",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "90db87f3-b996-435c-b309-a39815bbd226",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"text\":\"comment1 text\",\n    \"event\":1\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/users/1/comments"
      },
      "response": []
    },
    {
      "name": "create Comment#2 User#1",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "bf36b4c4-4b9a-4879-b2d1-44426320c08b",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"text\":\"comment2 text\",\n    \"event\":2\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/users/1/comments"
      },
      "response": []
    },
    {
      "name": "create Comment#3 User#2",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});"
            ]
          }
        }
      ],
      "id": "6fe8365e-1224-42d0-a43f-0fe308947fae",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"text\":\"comment3 text\",\n    \"event\":2\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/users/2/comments"
      },
      "response": []
    },
    {
      "name": "failed to create Comment#4 User#2",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 400\", function () {",
              "    pm.response.to.be.badRequest;    ",
              "});"
            ]
          }
        }
      ],
      "id": "71dfe567-c4cd-4a4a-9769-e1931217f29f",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"text\":\"comment4 text\",\n    \"event\":3\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/users/2/comments"
      },
      "response": []
    },
    {
      "name": "get Event#1 no comments",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});",
              "",
              "const target = pm.response.json();",
              "",
              "pm.test(\"Количество комментариев должно быть 0\", function () {",
              "    pm.expect(target.comments.length).equals(0);",
              "});"
            ]
          }
        }
      ],
      "id": "8bdfd992-3b86-405a-a443-816b5d60b042",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/events/1"
      },
      "response": []
    },
    {
      "name": "get Event#2 no comments",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});",
              "",
              "const target = pm.response.json();",
              "",
              "pm.test(\"Количество комментариев должно быть 0\", function () {",
              "    pm.expect(target.comments.length).equals(0);",
              "});"
            ]
          }
        }
      ],
      "id": "cbe5cfc2-0737-4ee1-89bc-e824cb476a11",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/events/2"
      },
      "response": []
    },
    {
      "name": "publish Comment#1",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "});"
            ]
          }
        }
      ],
      "id": "9a5cf792-4680-4709-8007-3e0eff05dacb",
      "request": {
        "method": "PATCH",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"state\":\"PUBLISHED\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/admin/comments/1"
      },
      "response": []
    },
    {
      "name": "publish and update text Comment#2",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "});"
            ]
          }
        }
      ],
      "id": "9570cee2-2f75-4e55-af5c-a0b6c285a29a",
      "request": {
        "method": "PATCH",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"text\":\"comment2 new text\",\n    \"state\":\"PUBLISHED\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/admin/comments/2"
      },
      "response": []
    },
    {
      "name": "cancel Comment#3",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "});"
            ]
          }
        }
      ],
      "id": "5a83f353-7a0b-4a4e-af57-c1ca20524615",
      "request": {
        "method": "PATCH",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"state\":\"CANCELED\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/admin/comments/3"
      },
      "response": []
    },
    {
      "name": "get Event#1 with comments",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});",
              "",
              "const target = pm.response.json();",
              "",
              "pm.test(\"Количество комментариев должно быть 1\", function () {",
              "    pm.expect(target.comments.length).equals(1);",
              "    pm.expect(target.comments[0].text).equals(\"comment1 text\");",
              "});"
            ]
          }
        }
      ],
      "id": "3632a746-7491-453c-bb7d-ad1c5041bcdb",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/events/1"
      },
      "response": []
    },
    {
      "name": "get Event#2 with comments",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test(\"Ответ должен содержать код статуса 200 и данные в формате json\", function () {",
              "    pm.response.to.be.ok;    ",
              "    pm.response.to.be.withBody;",
              "    pm.response.to.be.json;",
              "});",
              "",
              "const target = pm.response.json();",
              "",
              "pm.test(\"Количество комментариев должно быть 1\", function () {",
              "    pm.expect(target.comments.length).equals(1);",
              "    pm.expect(target.comments[0].text).equals(\"comment2 new text\");",
              "});"
            ]
          }
        }
      ],
      "id": "83d699c1-76ea-41f4-befb-8969310a59fb",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": "localhost:8080/events/2"
      },
      "response": []
    }
  ]
}